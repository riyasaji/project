<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Dress</title>
    <link href="/static/img/favicon.png" rel="icon">
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        /* Custom styles */
        body {
            background-color: #fbfafa; /* White background */
            color: #0b0b0b; /* Dark text */
            font-family: 'Arial', sans-serif; /* Font style */
        }

        header {
            background-color: #ff69b4; /* Pink header */
            color: #fff; /* White text */
            padding: 10px;
            margin-bottom: 20px;
        }

        header img {
            max-height: 50px;
        }

        header h4 {
            font-size: 1.2em;
            margin-bottom: 0;
        }

        .error {
            color: red; /* Red color for errors */
            font-size: 0.9em;
        }

        input[type="file"] {
            border: none;
            background-color: #f8f9fa;
            color: #495057;
        }

        select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            padding: 12px;
            background: #f8f9fa url('https://cdn3.iconfinder.com/data/icons/iconic-1/32/sync_32x32.png') no-repeat right center / 18px;
        }
        
        input[type="submit"] {
            background-color: #0056b3;
            color: #ffffff;
            padding: 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
            font-weight: bold;
            margin-top: 20px;
        }
         
        input[type="submit"]:hover {
            background-color: #0ade34; /* Green color on hover */
        }

        .card-header {
            background-color: #b9bfc6;
        }

        .card-body {
            padding: 20px;
        }

        .form-row {
            margin-bottom: 20px;
        }

        .btn-primary {
            margin-top: 10px;
        }
    </style>
    <title>Add Dress</title>
</head>
<body>

<!-- Header -->
<header class="bg-dark">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-4">
                <img src="/static/img/favicon.png" alt="DreamDress Logo" class="img-fluid" style="max-height: 50px;">
				<span style="color: crimson;">DreamDress</span>
            </div>
            <div class="col-md-4">
                <h4 style="color:crimson;">Welcome  <span id="username">{{ user.username }}</span></h4>
            </div>
            <div class="col-md-4 text-right">
                <a href="{% url 'logout' %}" class="btn btn-danger">Logout</a>
            </div>
        </div>
    </div>
</header>

<!-- Main Content - Add Dress Form -->
<div class="container">
    <div class="card">
        <div class="card-header">
            <h5>Add Dress Product</h5>
        </div>
        <div class="card-body">
            <form method="post" enctype="multipart/form-data" onsubmit="return validateForm()">
                {% csrf_token %}
                
                <!-- Brand Name and Category -->
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="brandName">Brand Name</label>
                        <input type="text" class="form-control" name="brand_name" id="brand_name" required oninput="validateBrandName()" placeholder="Enter brand name">
                        <div id="brand_name_error" class="error"></div>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="category">Category</label>
                        <select id="category" class="form-control" name="category_name">
                            <option selected disabled>Select category</option>
                            <option>Dress</option>
                            <option>Shirt</option>
                            <option>Jeans</option>
                            <option>Swimwear</option>
                            <option>Sleepwear</option>
                            <option>Sportswear</option>
                            <option>Jumpsuits</option>
                            <option>Blazers</option>
                            <option>Jackets</option>
                            <option>Indian Wear</option>
                        </select>
                    </div>
                </div>

                <!-- Description and Material -->
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="description">Description</label>
                        <textarea class="form-control" name="about_product" id="about_product" required oninput="validateAboutProduct()" rows="3" placeholder="Enter product description"></textarea>
                        <div id="about_product_error" class="error"></div>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="material">Material</label>
                        <input type="text" class="form-control" name="material" required oninput="validateField('material')" placeholder="Enter material">
                        <div id="material_error" class="error"></div>
                    </div>
                </div>

                <!-- Price -->
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="price">Price</label>
                        <input type="text" class="form-control" name="current_price" id="current_price" step="0.01" required oninput="validateCurrentPrice()" placeholder="Enter price">
                        <div id="current_price_error" class="error"></div>
                    </div>
                </div>

                <!-- Dynamic stock management section -->
                <div id="dynamic-stock-section">
                    <!-- This is where dynamically added rows will go -->
                </div>

                <!-- Button to add a new row for managing stock -->
                <button type="button" class="btn btn-primary" onclick="addStockRow()">Manage Stock</button>

                <!-- Submit button for adding the product -->
                <button type="submit" class="btn btn-primary" name="addproduct">Add Product</button>
            </form>            
        </div>
    </div>
</div>


<!-- Bootstrap JS and jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
    function addStockRow() {
        // Create a new row for managing stock
        var stockRow = `
            <div class="stock-row">
                <div class="form-group col-md-6">
                    <label for="colors">Color</label>
                    <input type="text" class="form-control colors" placeholder="Enter color" name="colors[]">
                </div>
                <div class="form-group col-md-6">
                    <label for="productImage">Product Image</label>
                    <input type="file" class="form-control-file product-image" name="product_images[]" required>
                </div>
                <div class="sizes-section">
                    <div class="size-row">
                        <div class="form-group col-md-6">
                            <label for="sizes">Size</label>
                            <select class="form-control sizes" name="sizes[]">
                                <option value="Small">Small</option>
                                <option value="Medium">Medium</option>
                                <option value="Large">Large</option>
                                <option value="XL">XL</option>
                                <option value="XXL">XXL</option>
                                <option value="XXXL">3XL</option>
                                <option value="4XL">4XL</option>
                                <option value="5XL">5XL</option>
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="stockQuantity">Stock Quantity</label>
                            <input type="text" class="form-control text-center stock-quantity" value="1" name="stock">
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary add-size-button">Add Size</button>
                <button class="btn btn-primary done-button">Done</button>
            </div>
        `;

        // Append the new row to the dynamic-stock-section
        document.getElementById('dynamic-stock-section').insertAdjacentHTML('beforeend', stockRow);

        // Attach event listener to the "Add Size" button
        var addSizeButton = document.querySelector('.stock-row:last-child .add-size-button');
        addSizeButton.addEventListener('click', function() {
            addSizeRow(this); // Add a new size row when "Add Size" button is clicked
        });

        // Attach event listener to the "Done" button
        var doneButton = document.querySelector('.stock-row:last-child .done-button');
        doneButton.addEventListener('click', function() {
            addStockRow(); // Add a new row when "Done" button is clicked
        });
    }

    function addSizeRow(button) {
        var sizeRow = `
            <div class="size-row">
                <div class="form-group col-md-6">
                    <label for="sizes">Size</label>
                    <select class="form-control sizes" name="sizes[]">
                        <option value="Small">Small</option>
                        <option value="Medium">Medium</option>
                        <option value="Large">Large</option>
                        <option value="XL">XL</option>
                        <option value="XXL">XXL</option>
                        <option value="XXXL">3XL</option>
                        <option value="4XL">4XL</option>
                        <option value="5XL">5XL</option>
                    </select>
                </div>
                <div class="form-group col-md-6">
                    <label for="stockQuantity">Stock Quantity</label>
                    <input type="text" class="form-control text-center stock-quantity" value="1" name="stock">
                </div>
            </div>
        `;

        // Insert the new size row before the button
        button.insertAdjacentHTML('beforebegin', sizeRow);
    }
</script>



<script>
    $(document).ready(function () {
        // Increase stock units
        $("#increaseUnits").click(function () {
            var currentValue = parseInt($("#productUnits").val());
            $("#productUnits").val(currentValue + 1);
        });

        // Decrease stock units
        $("#decreaseUnits").click(function () {
            var currentValue = parseInt($("#productUnits").val());
            if (currentValue > 1) {
                $("#productUnits").val(currentValue - 1);
            }
        });
    });
</script>
<script>
    function addImageField() {
        var container = document.getElementById('image-container');
        var numImages = container.getElementsByTagName('input').length + 1;

        var input = document.createElement('input');
        input.type = 'file';
        input.name = 'image_' + numImages;
        container.appendChild(input);

        document.getElementById('num_images').value = numImages;
    }

    // Add validation function for the main image
    function validateMainImage() {
        var mainImageInput = document.querySelector('input[name="main_image"]');
        var mainImageError = document.getElementById('main_image_error');

        if (!mainImageInput.files.length) {
            mainImageError.textContent = 'Main Image is required';
        } else {
            mainImageError.textContent = '';
        }
    }

    // Add event listener for input change
    document.querySelector('input[name="main_image"]').addEventListener('change', validateMainImage);
</script>
<script>
    function validateField(fieldName, errorId) {
            var inputField = document.getElementsByName(fieldName)[0];
            var errorElement = document.getElementById(errorId);

            // Regular expression to allow only letters (both uppercase and lowercase)
            var lettersOnly = /^[A-Za-z]+$/;

            if (inputField.value.trim() === '') {
                errorElement.textContent = fieldName.charAt(0).toUpperCase() + fieldName.slice(1) + ' is required';
            } else if (!lettersOnly.test(inputField.value)) {
                errorElement.textContent = 'Only letters are allowed in the ' + fieldName.charAt(0).toUpperCase() + fieldName.slice(1);
            } else {
                errorElement.textContent = '';
            }
        }
    function validateProductName() {
            var productNameInput = document.getElementById('product_name');
            var productNameError = document.getElementById('product_name_error');

            var lettersOnly = /^[A-Za-z]+$/;

            if (productNameInput.value.trim() === '') {
                productNameError.textContent = 'Product Name is required';
            } else if (!lettersOnly.test(productNameInput.value)) {
                productNameError.textContent = 'Only letters are allowed in the Product Name';
            } else {
                productNameError.textContent = '';
            }
        }

    function validateAboutProduct() {
        var aboutProductInput = document.getElementById('about_product');
        var aboutProductError = document.getElementById('about_product_error');

        var lettersAndSpacesOnly = /^[A-Za-z ]+$/;

        if (aboutProductInput.value.trim() === '') {
            aboutProductError.textContent = 'About Product is required';
        } else if (!lettersAndSpacesOnly.test(aboutProductInput.value)) {
            aboutProductError.textContent = 'Only letters and spaces are allowed in the About Product';
        } else {
            aboutProductError.textContent = '';
        }
}
function validateCurrentPrice() {
            var currentPriceInput = document.getElementById('current_price');
            var currentPriceError = document.getElementById('current_price_error');

            var digitsOnly = /^\d+$/;

            if (currentPriceInput.value.trim() === '') {
                currentPriceError.textContent = 'Current Price is required';
            } else if (!digitsOnly.test(currentPriceInput.value)) {
                currentPriceError.textContent = 'Only digits are allowed in the Current Price';
            } else {
                currentPriceError.textContent = '';
            }
        }

        function validateField(fieldName) {
        var input = document.getElementsByName(fieldName)[0];
        var errorElement = document.getElementById(fieldName + '_error');

        // Regular expression to allow only letters (both uppercase and lowercase)
        var lettersOnly = /^[A-Za-z]+$/;

        if (input.value.trim() === '') {
            errorElement.textContent = 'Color is required';
        } else if (!lettersOnly.test(input.value)) {
            errorElement.textContent = 'Only letters are allowed in the Color';
        } else {
            errorElement.textContent = '';
        }
    }
    function validateField(fieldName) {
        var inputField = document.getElementsByName(fieldName)[0];
        var errorElement = document.getElementById(fieldName + '_error');

        // Regular expression to allow only letters (both uppercase and lowercase)
        var lettersOnly = /^[A-Za-z]+$/;

        if (inputField.value.trim() === '') {
            errorElement.textContent = 'Material is required';
        } else if (!lettersOnly.test(inputField.value)) {
            errorElement.textContent = 'Only letters are allowed in the Material';
        } else {
            errorElement.textContent = '';
        }
    }
    function validateForm() {
            // Add overall form validation logic here
            // Return true if the form is valid, false otherwise

            var errorElements = document.querySelectorAll('.error');
            for (var i = 0; i < errorElements.length; i++) {
                if (errorElements[i].textContent !== '') {
                    return false;
                }
            }

            return true;
        }
        function addImageField() {
            var container = document.getElementById('image-container');
            var numImages = container.getElementsByTagName('input').length + 1;

            var input = document.createElement('input');
            input.type = 'file';
            input.name = 'image_' + numImages;
            container.appendChild(input);

            document.getElementById('num_images').value = numImages;
        }

</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $('#sizes').select2();
    });
</script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>

</body>
</html>
